<div class="reviews-container">
  <div class="header">
    <h2>Review Management</h2>
    <p>View and manage all user reviews</p>
  </div>

  <div class="tabs">
    <button 
      class="tab" 
      [class.active]="activeTab() === 'all'"
      (click)="activeTab.set('all')">
      All Reviews ({{ allReviews().length }})
    </button>
    <button 
      class="tab" 
      [class.active]="activeTab() === 'pending'"
      (click)="activeTab.set('pending')">
      Pending ({{ pendingReviews().length }})
    </button>
  </div>

  @if (loading()) {
    <div class="loading">Loading reviews...</div>
  } @else if (displayedReviews.length === 0) {
    <div class="empty-state">
      <p>{{ activeTab() === 'all' ? 'No reviews yet' : 'No pending reviews' }}</p>
    </div>
  } @else {
    <div class="reviews-grid">
      @for (review of displayedReviews; track review.id) {
        <div class="review-card" [class.approved]="review.approved">
          <div class="review-header">
            <div>
              <h3>{{ review.movieTitle }}</h3>
              <p class="user-name">by {{ review.userName }}</p>
              @if (review.approved) {
                <span class="status-badge approved">Approved</span>
              } @else {
                <span class="status-badge pending">Pending</span>
              }
            </div>
            <div class="rating">
              @for (star of getStars(review.rating); track $index) {
                <span class="star">{{ star }}</span>
              }
            </div>
          </div>
          
          <p class="comment">{{ review.comment }}</p>
          
          <div class="review-footer">
            <span class="date">{{ review.createdAt | date:'short' }}</span>
            <div class="actions">
              @if (!review.approved) {
                <button class="btn-approve" (click)="approveReview(review.id)">
                  Approve
                </button>
              }
              <button class="btn-delete" (click)="deleteReview(review.id)">
                Delete
              </button>
            </div>
          </div>
        </div>
      }
    </div>
  }
</div>
